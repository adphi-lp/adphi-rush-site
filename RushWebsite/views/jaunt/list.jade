extends /common/layout

block head
  title='Jaunts'
  link(rel='stylesheet',href=basepath+'/css/jaunt.css')
  link(rel='stylesheet',href=basepath+'/css/vote.css')

block content
  .jaunt-thread-wrapper
    .jaunt-thread-header
      h2.title Jaunts
    ul.jaunt-thread-content
      -for (var i = 0; i < jaunts.length; i++)
        -var jaunt = jaunts[i];
        li.jaunt-wrapper
          .jaunt-header
            a.jaunt-title(href=basepath+'/jaunt/view?jID='+jaunt._id)
              h2 #{jaunt.name}
            span.jaunt-time #{jaunt.timehuman}
          .jaunt-content
            .jaunt-van-thread-wrapper
              -for (var j = 0; j < jaunt.vans.length; j++)
                -var van = jaunt.vans[j];
                .jaunt-van-wrapper
                  form.jaunt-van-edit-form(method='get',action=basepath+'/jaunt/editvan')
                    h3.jaunt-van-title #{van.name}
                    input(type='hidden',name='vID',value=van._id);
                    input(type='submit',value='Edit van')
                  form.jaunt-van-form(method='post',action=basepath+'/jaunt/pullVanFromJaunt')
                    span.jaunt-van-driver #{van.driver}
                    input(type='hidden',name='vID',value=van._id)
                    input(type='hidden',name='jID',value=jaunt._id)
                    input(type='submit',value='Pull van')
                  .jaunt-rushee-thread-wrapper
                    .jaunt-rushee-thread-header
                      h4.jaunt-rushee-thread-title Rushees
                    .jaunt-rushee-thread-content
                      -for (var k = 0; k < van.rushees.length; k++)
                        -var rushee = van.rushees[k];
                        .jaunt-rushee-wrapper
                          .jaunt-rushee-content
                            .jaunt-rushee-info-item.jaunt-rushee-name   
                              form.jaunt-rushee-form(method='post',
                                        action=basepath+'/jaunt/pullRusheeFromVan')
                                a(href=basepath+'/rushee/view?rID='+rushee._id) #{rushee.name}  
                                input(type='hidden',name='vID',value=van._id)
                                input(type='hidden',name='rID',value=rushee._id)
                                input(type='submit',value='Pull rushee')
                  .jaunt-brother-thread-wrapper
                    .jaunt-brother-thread-header
                      h4.jaunt-brother-thread-title Brothers
                    .jaunt-brother-thread-content
                      -for (var k = 0; k < van.brothers.length; k++)
                        -var brother = van.brothers[k];
                        .jaunt-brother-wrapper
                          .jaunt-brother-content
                            .jaunt-brother-name
                              form.jaunt-rushee-form(method='post',
                                        action=basepath+'/jaunt/pullBrotherFromVan')
                                a(href=basepath+'/brother/view?bID='+brother._id) #{brother.name}
                                input(type='hidden',name='vID',value=van._id)
                                input(type='hidden',name='bID',value=brother._id)
                                input(type='submit',value='Pull brother')
                                
  .jaunt-action-wrapper
    h2.title Add a Jaunt
    form.jaunt-action-content(method='post',action='#')
      .jaunt-action-item
        span.jaunt-action-name Name
        input.jaunt-action-input(type='text',required,name = 'jName')
      .jaunt-action-item
        span.jaunt-action-name Time
        input.jaunt-action-input(type='datetime-local',required,name = 'jTime')
      .jaunt-post
        input#save(type='submit',value='Submit')